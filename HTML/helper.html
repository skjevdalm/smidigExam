<html>
<head>
  <title>Dropdown with Arrow Keys</title>
</head>
<body>
  <div id="containerSearch">
    <input
      type="text"
      id="searchInput"
      onkeyup="generateDropdownItems(); filterItems(); "
      placeholder="Search..."
      data-translation-en="Search..."
      data-translation-no="SÃ¸k..."
      data-deque-tooltip="Search for the name of the painting"
      class="deque-input"
    />

    <button
      onclick="checkGuess()"
      placeholder="Enter your guess"
      data-translation-en="Check"
      data-translation-no="Sjekk"
      id="btnSelect"
    >
      Check
    </button>

    <div id="dropdown" class="dropdown-content"></div>
  </div>
  <script>
    function generateDropdownItems() {
      var dropdown = document.getElementById("dropdown");
      dropdown.innerHTML = ""; // Clear previous results

      var fragment = document.createDocumentFragment(); // Create a DocumentFragment to hold the currentFloorArray

      for (var i = 0; i < currentFloorArray.length; i++) {
        var removeWords = /(-crop|.jpg)/gi;
        var item = currentFloorArray[i].replace(removeWords, ""); // Get the current item in the currentFloorArray and remove the "-crop" part
        var link = document.createElement("a"); // Create an <a> element
        link.href = "#"; // Set the href attribute to "#"
        link.innerText = item; // Set the text content of the link to the current item
        link.addEventListener("click", function (e) {
          // Add a click event listener to the link
          e.preventDefault(); // Prevent the default link behavior
          var selectedItem = this.innerText; // Get the selected item
          document.getElementById("searchInput").value = selectedItem; // Set the search input value
          filterItems(); // Filter the items based on the selected value
        });
        fragment.appendChild(link); // Append the link to the DocumentFragment
      }

      dropdown.appendChild(fragment); // Append the DocumentFragment to the dropdown

      // Add event listener to the dropdown
      document.getElementById("dropdown").addEventListener("keydown", handleArrowKeys);
    }

    function handleArrowKeys(event) {
      var dropdown = document.getElementById("dropdown");
      var items = dropdown.getElementsByTagName("a");
      var currentIndex = dropdown.selectedIndex;

      console.log("event.keyCode:", event.keyCode);

      switch (event.keyCode) {
        case 38: // Up arrow
          console.log("Up arrow pressed");
          if (currentIndex > 0) {
            currentIndex--;
          }
          break;
        case 40: // Down arrow
          console.log("Down arrow pressed");
          if (currentIndex < items.length - 1) {
            currentIndex++;
          }
          break;
      }

      if (currentIndex >= 0) {
        console.log("Setting dropdown.selectedIndex to", currentIndex);
        dropdown.selectedIndex = currentIndex;
        dropdown.dispatchEvent(new Event("change"));
      }
    }

    // Generate the dropdown items
    generateDropdownItems();
  </script>
</body>
</html>
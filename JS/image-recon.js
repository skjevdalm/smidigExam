var imageList = [
	"AndreasMunchStudyingAnatomy-crop",
	"AndreasMunchStudyingAnatomy",
	"BathingGirls-crop",
	"BathingGirls",
	"BathingMan-crop",
	"BathingMan",
	"BathingMenOnRocks-crop",
	"BathingMenOnRocks",
	"BricklayerAtWork-crop",
	"BricklayerAtWork",
	"ChildrenandDucks-crop",
	"ChildrenandDucks",
	"ConsolationInTheForest-crop",
	"ConsolationInTheForest",
	"DiggingMenWithHorseAndCart-crop",
	"DiggingMenWithHorseAndCart",
	"FivePuppiesOnThecarpet-crop",
	"FivePuppiesOnTheCarpet",
	"ForestInSnow-crop",
	"ForestInSnow",
	"FromMaridalen-crop",
	"FromMaridalen",
	"HenrikIbsen-crop",
	"HenrikIbsen",
	"image1",
	"image1_duplicate",
	"image2",
	"image2_duplicate",
	"image3",
	"image3_duplicate",
	"inTheKennel-crop",
	"InTheKennel",
	"JealousyInTheGarden-crop",
	"JealousyInTheGarden",
	"KarenBjølstadInTheRockingChair-crop",
	"KarenBjølstadInTheRockingChair",
	"KarlJohanintheRain-crop",
	"KarlJohanintheRain",
	"LifeLeftPart-crop",
	"LifeLeftPart",
	"RecliningNudeOnTheRocks-crop",
	"RecliningNudeonTheRocks",
	"RolfHansen-crop",
	"RolfHansen",
	"SelfPortrait-crop",
	"SelfPortrait",
	"StarryNight-crop",
	"StarryNight",
	"theFight-crop",
	"TheFight",
	"TheGirlFromNordland-crop",
	"TheGirlFromNordland",
	"TheGirlsOnTheBridge-crop",
	"TheGirlsOnTheBridge",
	"TheMurderer-crop",
	"TheMurderer",
	"TreesByTheSea-crop",
	"TreesByTheSea",
	"TwoWomenByTheVerandaSteps-crop",
	"TwoWomenByTheVerandaSteps",
	"TwoWomenIntheGarden-crop",
	"TwoWomenInTheGarden",
	"UninvitedGuests-crop",
	"UninvitedGuests",
	"WavesAgainstTheShore-crop",
	"WavesAgainstTheShore",
];
/*
var imageListCropped = [
	"AndreasMunchStudyingAnatomy-crop",
	"BathingGirls-crop",
	"BathingMan-crop",
	"BathingMenOnRocks-crop",
	"BricklayerAtWork-crop",
	"ChildrenandDucks-crop",
	"ConsolationInTheForest-crop",
	"DiggingMenWithHorseAndCart-crop",
	"FivePuppiesOnThecarpet-crop",
	"ForestInSnow-crop",
	"FromMaridalen-crop",
	"inTheKennel-crop",
	"JealousyInTheGarden-crop",
	"KarenBjølstadInTheRockingChair-crop",
	"KarlJohanintheRain-crop",
	"LifeLeftPart-crop",
	"RecliningNudeOnTheRocks-crop",
	"TheFight-crop",
	"TheGirlFromNordland-crop",
	"TheGirlsOnTheBridge-crop",
	"TheMurderer-crop",
	"TreesByTheSea-crop",
	"TwoWomenByTheVerandaSteps-crop",
	"TwoWomenIntheGarden-crop",
	"UninvitedGuests-crop",
	"WavesAgainstTheShore-crop",
];

var imageListNormal = [
	"AndreasMunchStudyingAnatomy",
	"BathingGirls",
	"BathingMan",
	"BathingMenOnRocks",
	"BricklayerAtWork",
	"ChildrenandDucks",
	"ConsolationInTheForest",
	"DiggingMenWithHorseAndCart",
	"FivePuppiesOnTheCarpet",
	"ForestInSnow",
	"FromMaridalen",
	"InTheKennel",
	"JealousyInTheGarden",
	"KarenBjølstadInTheRockingChair",
	"KarlJohanintheRain",
	"LifeLeftPart",
	"RecliningNudeonTheRocks",
	"TheFight",
	"TheGirlFromNordland",
	"TheGirlsOnTheBridge",
	"TheMurderer",
	"TreesByTheSea",
	"TwoWomenByTheVerandaSteps",
	"TwoWomenInTheGarden",
	"UninvitedGuests",
	"WavesAgainstTheShore",
];
*/
var floor1List = [
	"AndreasMunchStudyingAnatomy",
	"BathingGirls",
	"BathingMan",
	"BathingMenOnRocks",
	"BricklayerAtWork",
];

var floor2List = [
	"ChildrenandDucks",
	"ConsolationInTheForest",
	"DiggingMenWithHorseAndCart",
	"FivePuppiesOnTheCarpet",
	"ForestInSnow",
];

var floor3List = [
	"FromMaridalen",
	"InTheKennel",
	"JealousyInTheGarden",
	"KarenBjølstadInTheRockingChair",
	"KarlJohanintheRain",
];

var floor4List = [
	"LifeLeftPart",
	"RecliningNudeonTheRocks",
	"TheFight",
	"TheGirlFromNordland",
	"TheGirlsOnTheBridge",
];

var floor5List = [
	"TheMurderer",
	"TreesByTheSea",
	"TwoWomenByTheVerandaSteps",
	"TwoWomenInTheGarden",
	"UninvitedGuests",
	"WavesAgainstTheShore",
];

var floor1ListCrop = [
	"AndreasMunchStudyingAnatomy-crop",
	"BathingGirls-crop",
	"BathingMan-crop",
	"BathingMenOnRocks-crop",
	"BricklayerAtWork-crop",
];

var floor2ListCrop = [
	"ChildrenandDucks-crop",
	"ConsolationInTheForest-crop",
	"DiggingMenWithHorseAndCart-crop",
	"FivePuppiesOnThecarpet-crop",
	"ForestInSnow-crop",
];

var floor3ListCrop = [
	"FromMaridalen-crop",
	"inTheKennel-crop",
	"JealousyInTheGarden-crop",
	"KarenBjølstadInTheRockingChair-crop",
	"KarlJohanintheRain-crop",
];

var floor4ListCrop = [
	"LifeLeftPart-crop",
	"RecliningNudeOnTheRocks-crop",
	"TheFight-crop",
	"TheGirlFromNordland-crop",
	"TheGirlsOnTheBridge-crop",
];

var floor5ListCrop = [
	"TheMurderer-crop",
	"TreesByTheSea-crop",
	"TwoWomenByTheVerandaSteps-crop",
	"TwoWomenIntheGarden-crop",
	"UninvitedGuests-crop",
	"WavesAgainstTheShore-crop",
];

var currentFloorArray = null;
var currentFloorCropNorm = null;
var currentImage = "there is no current image selected"; //letting the user know that there is no current image selected
var userGuess = "there is no user guess :("; // placeholder for a default user guess
var result;
var randomIndex;
var resultImgDiv;
var resultImagePath;
const imagePath = "../../Images/"; // This is for the path of the images. in this case it is in the Images folder
const jpg = ".jpg"; // This is for the extension of the images. in this case it is .jpg, just to to make it easier to add compare without the extension later
var randomIndex;
var showImgBtn;

var filter;
var dropdown;
var item;
var a;
var i;

function clearLocalStorage() {
	localStorage.clear();
	currentFloorArray = [];
}
function clearArray() {
	currentFloorArray = [];
}
function showArray() {
	for (let i = 0; i < currentFloorArray.length; i++) {
		console.log(currentFloorArray[i]);
	}
}

function setFloor(floorNumber) {
	let currentFloorArray, currentFloorCropNorm;

	switch (floorNumber) {
		case 1:
			currentFloorArray = floor1ListCrop || [];
			currentFloorCropNorm = floor1List || [];
			break;
		case 2:
			currentFloorArray = floor2ListCrop || [];
			currentFloorCropNorm = floor2List || [];
			break;
		case 3:
			currentFloorArray = floor3ListCrop || [];
			currentFloorCropNorm = floor3List || [];
			break;
		case 4:
			currentFloorArray = floor4ListCrop || [];
			currentFloorCropNorm = floor4List || [];
			break;
		case 5:
			currentFloorArray = floor5ListCrop || [];
			currentFloorCropNorm = floor5List || [];
			break;
		default:
			// Handle invalid floor number
			console.log("Invalid floor number");
			return;
	}

	localStorage.setItem("currentFloorArray", JSON.stringify(currentFloorArray +" this is a string"));
	localStorage.setItem("currentFloorCropNorm", JSON.stringify(currentFloorCropNorm));

	console.log(
		"\n\n" +
			currentFloorArray +
			typeof currentFloorArray +
			"\n\n" +
			localStorage.getItem("currentFloorArray") +
			typeof localStorage.getItem("currentFloorArray")
	);
}

///////////////////////////////////////////////////////////working code ->>>>/////////////////////////////////////////////

/*
function setFloor(floorNumber) {
	switch (floorNumber) {
		case 1:
			currentFloorArray = floor1ListCrop;
			currentFloorCropNorm = floor1List;
			localStorage.setItem("currentFloorArray", JSON.stringify(currentFloorArray));
			localStorage.setItem("currentFloorCropNorm", JSON.stringify(currentFloorCropNorm));
			console.log(
				"\n\n" +
					currentFloorArray +
					typeof currentFloorArray +
					"\n\n" +
					localStorage.getItem("currentFloorArray") +
					typeof localStorage.getItem("currentFloorArray")
			);
			break;
		case 2:
			currentFloorArray = floor2ListCrop;
			currentFloorCropNorm = floor2List;
			localStorage.setItem("currentFloorArray", JSON.stringify(currentFloorArray));
			localStorage.setItem("currentFloorCropNorm", JSON.stringify(currentFloorCropNorm));
			console.log(
				"\n\n" +
					currentFloorArray +
					typeof currentFloorArray +
					"\n\n" +
					localStorage.getItem("currentFloorArray") +
					typeof localStorage.getItem("currentFloorArray")
			);
			break;
		case 3:
			currentFloorArray = floor3ListCrop;
			currentFloorCropNorm = floor3List;
			localStorage.setItem("currentFloorArray", JSON.stringify(currentFloorArray));
			localStorage.setItem("currentFloorCropNorm", JSON.stringify(currentFloorCropNorm));
			console.log(
				"\n\n" +
					currentFloorArray +
					typeof currentFloorArray +
					"\n\n" +
					localStorage.getItem("currentFloorArray") +
					typeof localStorage.getItem("currentFloorArray")
			);
			break;
		case 4:
			currentFloorArray = floor4ListCrop;
			currentFloorCropNorm = floor4List;
			localStorage.setItem("currentFloorArray", JSON.stringify(currentFloorArray));
			localStorage.setItem("currentFloorCropNorm", JSON.stringify(currentFloorCropNorm));
			console.log(
				"\n\n" +
					currentFloorArray +
					typeof currentFloorArray +
					"\n\n" +
					localStorage.getItem("currentFloorArray") +
					typeof localStorage.getItem("currentFloorArray")
			);
			break;
		case 5:
			currentFloorArray = floor5ListCrop;
			currentFloorCropNorm = floor5List;
			localStorage.setItem("currentFloorArray", JSON.stringify(currentFloorArray));
			localStorage.setItem("currentFloorCropNorm", JSON.stringify(currentFloorCropNorm));
			console.log(
				"\n\n" +
					currentFloorArray +
					typeof currentFloorArray +
					"\n\n" +
					localStorage.getItem("currentFloorArray") +
					typeof localStorage.getItem("currentFloorArray")
			);
			break;
		default:
			// Handle invalid floor number
			console.log("Invalid floor number");
			return;
	}
}
*/
//////////////////////////////////////////////////////////////////////////////////////////////

function displayRandomImage() {
	clearResultDiv();
	var fullImagePath = currentFloorArray.map(function (imageName) {
		return imagePath + imageName + jpg; // This will return the full image path for each image in the array with the correct extension
	});
	console.log(fullImagePath + "\n\nwe have an image path"); // This will log the full image path for each image in the array with the correct extension
	randomIndex = Math.floor(Math.random() * currentFloorArray.length); //Get random index number for a random image
	var randomImagePath = fullImagePath[randomIndex]; //get random image path, this includes the path and the image name with current floor-array
	var imageElement = document.createElement("img"); // Create an image element to put the image in
	imageElement.src = randomImagePath; // This will put the image in the image element based on the random image path
	imageElement.style.width = "300px"; // Set the width of the image
	imageElement.style.height = "300px"; // Set the height of the image
	currentImage = currentFloorArray[randomIndex].toString().toUpperCase(); // Get the current image name as a string
	//console.log(currentFloorArray);
	var imageContainer = document.getElementById("Container1"); // Get the container into a variable
	imageContainer.innerHTML = ""; // Clear the container
	imageContainer.appendChild(imageElement); // Add the image to the container
	console.log(currentFloorArray[randomIndex]);
}

function checkGuess() {
	userGuess = document.getElementById("searchInput").value.toUpperCase(); // Get the user guess from the searchInput field
	var userGuessString = userGuess.toString().toUpperCase().replace(/\s/g, ""); // Convert the user guess to a string and make it uppercase, then remove all spaces so that it can be compared to the current image name that is without spaces
	//var userGuessStringUpperNoSpace = userGuessString.replace(/\s/g, ""); // Remove all spaces from the user guess
	resultImgDiv = document.getElementById("resultImgDiv"); // Get the result image Div element
	result = document.getElementById("resultDiv"); // Get the result container Div
	//resultParagraph = document.getElementById("resultParagraph"); // Create a paragraph element
	if (userGuessString + "-CROP" == currentImage) {
		// check if the user guess is the same as the random image path (in an attempt to be case-insensitive)
		correctResult();
	} else {
		incorrectResult();
	}
}

function correctResult() {
	//showImgBtn = document.getElementById("showImgBtn");
	//showImgBtn.innerHTML = "Next Image"
	resultImagePath =
		'<img src="' +
		imagePath +
		currentFloorCropNorm[randomIndex] +
		jpg +
		'" width="300px" alt="hei">' +
		"Correct!"; // This will create the image path for the result image
	resultDiv.innerHTML = resultImagePath;
}

function incorrectResult() {
	result = document.getElementById("resultDiv"); // Get the result element (again..)
	result.innerHTML = "lmao noob"; // This will clear the result element in the html file
}

function clearResultDiv() {
	result = document.getElementById("resultDiv"); // Get the result element (again..)
	result.innerHTML = ""; // This will clear the result element in the html file
}

function getItemFromLocalStorage() {
	// This function is not used, but it can be used to get the current floor array from local storage
	for (var i = 0; i < localStorage.length; i++) {
		var key = localStorage.key(i);
		var value = localStorage.getItem(key);
		console.log(key + ": " + value);
	}
}

/*********search function test 01*******************/
function handleInput() {
	var searchInput = document.getElementById("searchInput").value.replace(/\s/g, ""); // Get the user input from the search field
	var suggestionsList = document.getElementById("suggestionsList"); // Get the suggestions list element

	// Clear previous suggestions
	suggestionsList.innerHTML = "";
	// Filter search terms based on user input
	var matchingTerms = currentFloorArray.filter((term) =>
		term.toLowerCase().startsWith(searchInput.toLowerCase())
	);

	// Display matching terms as suggestions
	if (searchInput.length > 0) {
		matchingTerms.forEach((term) => {
			var li = document.createElement("li");
			li.textContent = term;
			suggestionsList.appendChild(li);
			if (suggestionsList == null) {
				suggestionsList = "No result";
			}
		});
	} else {
		suggestionsList.innerHTML = "";
	}
}

function keyDownFunc(event) {
	if (event.key === "Enter") {
		console.log("Enter pressed");
		checkGuess();
	}
}
// ...................................code for the search function----------------------------------------------
// ...................................code for the search function----------------------------------------------
// ...................................code for the search function----------------------------------------------
function generateDropdownItems() {
	var dropdown = document.getElementById("dropdown");
	dropdown.innerHTML = ""; // Clear previous currentFloorArray

	var fragment = document.createDocumentFragment(); // Create a DocumentFragment to hold the currentFloorArray

	for (var i = 0; i < currentFloorArray.length; i++) {
		var item = currentFloorArray[i].replace("-crop", ""); // Get the current item in the currentFloorArray and remove the "-crop" part
		var link = document.createElement("a"); // Create an <a> element
		link.href = "#"; // Set the href attribute to "#"
		link.innerText = item; // Set the text content of the link to the current item
		link.addEventListener("click", function (e) {
			// Add a click event listener to the link
			e.preventDefault(); // Prevent the default link behavior
			var selectedItem = this.innerText; // Get the selected item
			document.getElementById("searchInput").value = selectedItem; // Set the search input value
			filterItems(); // Filter the items based on the selected value
		});
		fragment.appendChild(link); // Append the link to the DocumentFragment
	}

	dropdown.appendChild(fragment); // Append the DocumentFragment to the dropdown
}

// Function to filter the items based on search input

function filterItems() {
	var input, filter, dropdown, items, a, i; // Declare variables
	input = document.getElementById("searchInput"); // Get the input element

	if (!input) {
		// Check if the input element exists
		console.error("searchInput element not found"); // Log an error message
		return;
	}

	filter = input.value.toUpperCase(); // Convert the input value to uppercase
	dropdown = document.getElementById("dropdown"); // Get the dropdown element

	if (!dropdown) {
		console.error("dropdown element not found"); // Log an error message
		return;
	}

	items = dropdown.getElementsByTagName("a"); // Get all <a> elements inside the dropdown

	for (i = 0; i < items.length; i++) {
		// Loop through all <a> elements
		a = items[i];

		if (!a) {
			console.error("Invalid item at index", i); // Log an error message
			continue;
		}

		if (a.innerText && a.innerText.toUpperCase().indexOf(filter) > -1) {
			// If the item contains the search term, show it
			a.style.display = ""; // Show the item
		} else {
			a.style.display = "none"; // Hide the item
		}
	}

	if (filter.length > 0) {
		dropdown.classList.add("show"); // Show the dropdown
	} else {
		dropdown.classList.remove("show"); // Hide the dropdown
	}
}

// Function to select an item
function selectItem(item) {
	document.getElementById("searchInput").value = item;
	document.getElementById("dropdown").classList.remove("show");
}

// Close the dropdown when clicking outside
window.onclick = function (event) {
	if (!event.target.matches("#searchInput")) {
		var dropdowns = document.getElementsByClassName("dropdown-content");
		for (var i = 0; i < dropdowns.length; i++) {
			var openDropdown = dropdowns[i];
			if (openDropdown.classList.contains("show")) {
				openDropdown.classList.remove("show");
			}
		}
	}
};

// Add event listener to the search input field
document.getElementById("searchInput").addEventListener("keyup", filterItems);

// Generate initial dropdown items
